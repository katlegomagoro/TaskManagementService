@namespace TaskManagementService.Components.Tasks
@using MudBlazor
@using TaskManagementService.DAL.Enums
@using TaskManagementService.Models.ViewModels

<MudPaper Class="pa-3 mb-4">
    <MudGrid>
        <!-- Search Field -->
        <MudItem xs="12" sm="6" md="4" Class="mb-3">
            <MudTextField Value="@_searchTerm"
                          ValueChanged="@(async (string v) => await OnSearchTermChanged(v))"
                          Label="Search Tasks"
                          Placeholder="Search by title or description..."
                          Adornment="Adornment.End"
                          Icon="@Icons.Material.Filled.Search"
                          OnDebounceIntervalElapsed="@(async (string v) => await OnSearchChanged(v))"
                          DebounceInterval="300"
                          Variant="Variant.Outlined"
                          FullWidth="true" />
        </MudItem>

        <!-- Status Filter -->
        <MudItem xs="12" sm="6" md="3" Class="mb-3">
            <MudSelect T="TaskManagementService.DAL.Enums.TaskStatus?"
                       Value="@_statusFilter"
                       ValueChanged="@(async (TaskManagementService.DAL.Enums.TaskStatus? v) => await OnStatusFilterChanged(v))"
                       Label="Status"
                       Variant="Variant.Outlined"
                       FullWidth="true">
                <MudSelectItem T="TaskManagementService.DAL.Enums.TaskStatus?" Value="@(null)">All Statuses</MudSelectItem>
                @foreach (var status in Enum.GetValues<TaskManagementService.DAL.Enums.TaskStatus>())
                {
                    <MudSelectItem T="TaskManagementService.DAL.Enums.TaskStatus?" Value="@status">@status.ToString()</MudSelectItem>
                }
            </MudSelect>
        </MudItem>

        <!-- Date Range -->
        <MudItem xs="12" sm="6" md="3" Class="mb-3">
            <MudDatePicker Date="@_startDate"
                           DateChanged="@(async (DateTime? v) => await OnStartDateChanged(v))"
                           Label="From Date"
                           Variant="Variant.Outlined"
                           FullWidth="true" />
        </MudItem>

        <MudItem xs="12" sm="6" md="2" Class="mb-3">
            <MudDatePicker Date="@_endDate"
                           DateChanged="@(async (DateTime? v) => await OnEndDateChanged(v))"
                           Label="To Date"
                           Variant="Variant.Outlined"
                           FullWidth="true" />
        </MudItem>

        <!-- Action Buttons -->
        <MudItem xs="12" sm="6" md="3" Class="mb-3 d-flex align-end">
            <MudButton Variant="Variant.Filled"
                       Color="Color.Primary"
                       OnClick="@(async () => await ApplyFilters())"
                       FullWidth="true"
                       StartIcon="@Icons.Material.Filled.FilterList">
                Apply Filters
            </MudButton>

            <MudButton Variant="Variant.Text"
                       Color="Color.Secondary"
                       OnClick="@(async () => await ResetFilters())"
                       Class="ml-2"
                       StartIcon="@Icons.Material.Filled.Refresh">
                Reset
            </MudButton>
        </MudItem>
    </MudGrid>
</MudPaper>